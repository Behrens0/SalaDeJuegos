import{a as A}from"./chunk-NWFSGMAH.js";import"./chunk-LJ5XHLMQ.js";import{C as d,F as s,H as i,I as r,J as l,K as x,L as _,M as p,R as c,S as C,T as v,U as w,Z as M,ga as R,ha as P,i as g,ia as O,ka as E,m as f,n as b,na as k,oa as T,ta as z,v as a,x as y,y as I,z as h}from"./chunk-CB2OHQ7B.js";import{h as m}from"./chunk-FK42CRUA.js";var V=n=>({"letra-usada":n});function D(n,e){if(n&1){let t=x();i(0,"button",22),_("click",function(){let u=f(t).$implicit,N=p();return b(N.seleccionarLetra(u))}),c(1),r()}if(n&2){let t=e.$implicit,o=p();s("disabled",o.letrasSeleccionadas.includes(t))("ngClass",M(3,V,o.letrasSeleccionadas.includes(t))),a(),v(" ",t," ")}}function G(n,e){if(n&1&&(i(0,"div",23)(1,"h4"),c(2,"Letras seleccionadas:"),r(),i(3,"p"),c(4),r()()),n&2){let t=p();a(4),C(t.letrasSeleccionadas.join(", "))}}function J(n,e){if(n&1){let t=x();i(0,"div",24)(1,"p"),c(2),r(),i(3,"button",25),_("click",function(){f(t);let u=p();return b(u.getRandomWord())}),c(4,"JUGAR OTRA VEZ"),r()()}if(n&2){let t=p();a(2),C(t.mensajeResultado)}}function L(n,e){if(n&1&&(i(0,"li"),c(1),r()),n&2){let t=e.$implicit;a(),w(" ",t.nombre," - ",t.puntos," puntos ")}}function U(n,e){n&1&&l(0,"img",26)}function H(n,e){n&1&&l(0,"img",27)}function B(n,e){n&1&&l(0,"img",28)}function W(n,e){n&1&&l(0,"img",29)}function $(n,e){n&1&&l(0,"img",30)}function X(n,e){n&1&&l(0,"img",31)}function Z(n,e){n&1&&l(0,"img",32)}function K(n,e){if(n&1){let t=x();i(0,"button",33),_("click",function(){f(t);let u=p();return b(u.finalizarJuego())}),c(1,` Finalizar juego
`),r()}}var j=class n{constructor(e,t){this.http=e;this.supabaseService=t;this.getRandomWord(),this.obtenerRanking()}letrasSeleccionadas=[];palabraSecreta=null;intentosRestantes=6;juegoTerminado=!1;palabraCargada=!1;mensajeResultado="";puntos=0;mejoresJugadores=[];obtenerCorreoUsuario(){return m(this,null,function*(){let{data:{user:e},error:t}=yield this.supabaseService.getUser();return t?(console.error("Error obteniendo usuario:",t),null):e?.email||null})}guardarResultado(){return m(this,null,function*(){let e=yield this.obtenerCorreoUsuario();if(e){let{error:t}=yield this.supabaseService.guardarResultadoRanking(e,this.puntos);t?(console.error("Error al guardar el resultado: ",t),this.mensajeResultado="Error al guardar el resultado. Intenta nuevamente."):(console.log("Resultado guardado"),this.obtenerRanking())}else console.error("No hay usuario autenticado"),this.mensajeResultado="No se pudo obtener el correo del usuario. Aseg\xFArate de estar logueado."})}obtenerRanking(){return m(this,null,function*(){let{data:e,error:t}=yield this.supabaseService.obtenerTopRanking();t?(console.error("Error al obtener ranking: ",t),this.mensajeResultado="Error al obtener el ranking. Intenta nuevamente."):e&&(this.mejoresJugadores=e.map(o=>({nombre:o.correo,puntos:o.score})))})}finalizarJuego(){this.juegoTerminado&&this.guardarResultado()}getRandomWord(){this.palabraCargada=!1,this.http.get("https://random-word-api.herokuapp.com/word?lang=es").subscribe(e=>{if(Array.isArray(e)&&e.length>0){let t=e[0].toUpperCase();this.contieneLetrasConAcento(t)||this.contieneDiacriticos(t)||this.contieneEspacios(t)?this.getRandomWord():(this.palabraSecreta=t,this.resetGame(),console.log("Palabra secreta asignada:",this.palabraSecreta))}},e=>{console.error("Error al obtener la palabra secreta",e)})}contieneLetrasConAcento(e){return/[áéíóúÁÉÍÓÚ]/.test(e)}contieneDiacriticos(e){return/[üñ]/.test(e)}contieneEspacios(e){return e.includes(" ")}resetGame(){this.letrasSeleccionadas=[],this.intentosRestantes=6,this.juegoTerminado=!1,this.palabraCargada=!0,this.mensajeResultado=""}seleccionarLetra(e){!this.letrasSeleccionadas.includes(e)&&!this.juegoTerminado&&this.palabraCargada&&(this.letrasSeleccionadas.push(e),this.palabraSecreta&&!this.palabraSecreta.includes(e)&&(this.intentosRestantes--,this.intentosRestantes===0&&(this.juegoTerminado=!0,this.mensajeResultado="PERDISTE. La palabra era: "+this.palabraSecreta)),this.haGanado()&&(this.juegoTerminado=!0,this.mensajeResultado="\xA1EXCELENTE! Sumaste 5 puntos",this.puntos+=5),this.juegoTerminado&&this.finalizarJuego())}obtenerPalabraConGuiones(){return this.palabraSecreta?this.palabraSecreta.split("").map(e=>this.letrasSeleccionadas.includes(e)?e:"_").join(" "):""}haGanado(){return this.palabraSecreta?.split("").every(e=>this.letrasSeleccionadas.includes(e))}static \u0275fac=function(t){return new(t||n)(y(k),y(A))};static \u0275cmp=I({type:n,selectors:[["app-ahorcado"]],standalone:!1,decls:35,vars:15,consts:[[1,"ahorcado-container"],[1,"contenido-flex"],[1,"juego"],[1,"palabra"],[1,"letras"],[1,"letras-grid"],[3,"disabled","ngClass","click",4,"ngFor","ngForOf"],["class","letras-seleccionadas",4,"ngIf"],["class","mensaje-final",4,"ngIf"],[1,"intentos"],[1,"puntos"],[1,"ranking-container"],[4,"ngFor","ngForOf"],[1,"image-container"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//cuerda.png","alt","Cuerda",4,"ngIf"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//cabeza.png","alt","Cabeza",4,"ngIf"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//torso.png","alt","Torso",4,"ngIf"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//brazo1.png","alt","Brazo Izquierdo",4,"ngIf"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//brazo2.png","alt","Brazo Derecho",4,"ngIf"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//pierna1.png","alt","Pierna Izquierda",4,"ngIf"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//cuerpo.png","alt","Cuerpo Entero",4,"ngIf"],["class","btn-finalizar",3,"click",4,"ngIf"],[3,"click","disabled","ngClass"],[1,"letras-seleccionadas"],[1,"mensaje-final"],[1,"btn-reintentar",3,"click"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//cuerda.png","alt","Cuerda"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//cabeza.png","alt","Cabeza"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//torso.png","alt","Torso"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//brazo1.png","alt","Brazo Izquierdo"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//brazo2.png","alt","Brazo Derecho"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//pierna1.png","alt","Pierna Izquierda"],["src","https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//cuerpo.png","alt","Cuerpo Entero"],[1,"btn-finalizar",3,"click"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h4"),c(5,"Adivina la palabra:"),r(),i(6,"p",3),c(7),r()(),i(8,"div",4)(9,"h4"),c(10,"Selecciona una letra:"),r(),i(11,"div",5),d(12,D,2,5,"button",6),r()(),d(13,G,5,1,"div",7)(14,J,5,1,"div",8),i(15,"div",9)(16,"h4"),c(17),r()(),i(18,"div",10)(19,"h4"),c(20),r()(),i(21,"div",11)(22,"h3"),c(23,"TOP 5:"),r(),i(24,"ul"),d(25,L,2,2,"li",12),r()()(),i(26,"div",13),d(27,U,1,0,"img",14)(28,H,1,0,"img",15)(29,B,1,0,"img",16)(30,W,1,0,"img",17)(31,$,1,0,"img",18)(32,X,1,0,"img",19)(33,Z,1,0,"img",20),r(),d(34,K,2,0,"button",21),r()()),t&2&&(a(7),C(o.obtenerPalabraConGuiones()),a(5),s("ngForOf","ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")),a(),s("ngIf",o.letrasSeleccionadas.length>0),a(),s("ngIf",o.juegoTerminado),a(3),v("Intentos restantes: ",o.intentosRestantes,""),a(3),v("Puntos: ",o.puntos,""),a(5),s("ngForOf",o.mejoresJugadores),a(2),s("ngIf",o.intentosRestantes===6),a(),s("ngIf",o.intentosRestantes===5),a(),s("ngIf",o.intentosRestantes===4),a(),s("ngIf",o.intentosRestantes===3),a(),s("ngIf",o.intentosRestantes===2),a(),s("ngIf",o.intentosRestantes===1),a(),s("ngIf",o.intentosRestantes===0),a(),s("ngIf",!o.juegoTerminado))},dependencies:[R,P,O],styles:[".ahorcado-container[_ngcontent-%COMP%]{max-width:1000px;margin:40px auto;padding:25px;border:2px solid #6a5acd;border-radius:12px;background-color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#2e2e8f;box-shadow:0 6px 12px #6a5acd33}.contenido-flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}@media (min-width: 768px){.contenido-flex[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:flex-start}}.juego[_ngcontent-%COMP%]{flex:2;padding:20px}.letra-usada[_ngcontent-%COMP%]{opacity:.3;pointer-events:none}.ranking-container[_ngcontent-%COMP%]{flex:1;border:2px solid #b0a8ff;padding:20px;background-color:#f5f5ff;border-radius:12px;text-align:left;box-shadow:0 4px 8px #6a5acd4d;color:#3a3a9e}.ranking-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;font-size:22px}.ranking-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding-left:0}.btn-finalizar[_ngcontent-%COMP%]{margin-top:10px;padding:10px 15px;background-color:#e74c3c;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700}.btn-finalizar[_ngcontent-%COMP%]:hover{background-color:#c0392b}.ranking-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 0;font-size:16px;border-bottom:1px solid #c7c3ff}.palabra[_ngcontent-%COMP%]{font-size:26px;letter-spacing:10px;font-weight:700;margin-bottom:25px}.letras-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(30px,1fr));gap:10px;margin-top:20px}.letras-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#7b68ee;border:none;border-radius:6px;color:#fff;padding:12px 0;font-size:14px;cursor:pointer;transition:background-color .3s ease}.letras-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#5a4fcf}.letras-seleccionadas[_ngcontent-%COMP%]{margin-top:20px;font-size:16px;color:#4b4bb8}.mensaje-final[_ngcontent-%COMP%]{margin-top:24px;font-size:18px;color:#b03060;font-weight:700}.btn-reintentar[_ngcontent-%COMP%]{background-color:#6a5acd;color:#fff;padding:10px 22px;border:none;border-radius:6px;cursor:pointer;font-size:15px;margin-top:20px;transition:background-color .3s ease}.btn-reintentar[_ngcontent-%COMP%]:hover{background-color:#4b3fa6}.intentos[_ngcontent-%COMP%]{margin-top:16px;font-size:16px;color:#3c3c9e}.puntos[_ngcontent-%COMP%]{margin-top:18px;font-size:18px;color:#2f2fa7}.image-container[_ngcontent-%COMP%]{text-align:center;margin-top:25px}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:250px}"]})};var Q=[{path:"",component:j}],S=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=h({type:n});static \u0275inj=g({imports:[z.forChild(Q),z]})};var F=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=h({type:n});static \u0275inj=g({imports:[E,T,S]})};export{F as AhorcadoModule};
