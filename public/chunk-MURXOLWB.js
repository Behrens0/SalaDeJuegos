import{a as _}from"./chunk-NWFSGMAH.js";import"./chunk-LJ5XHLMQ.js";import{C as y,F as g,H as o,I as r,J as C,L as d,R as i,T as b,U as M,ha as x,i as p,ka as O,t as h,ta as f,v as s,x as j,y as v,z as l}from"./chunk-CB2OHQ7B.js";import{h as c}from"./chunk-FK42CRUA.js";function k(a,e){if(a&1&&(o(0,"li"),i(1),r()),a&2){let t=e.$implicit;s(),M(" ",t.nombre," - ",t.puntos," ")}}var m=class a{constructor(e){this.supabaseService=e;this.iniciarJuego(),this.obtenerRanking()}cartaActual;siguienteCarta;puntaje=0;mensaje="";mejoresJugadores=[];cartas=[{valor:1,palo:"corazones",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//1basto.jpg"},{valor:2,palo:"tr\xE9boles",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//2oro.jpg"},{valor:3,palo:"diamantes",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//3espada.jpg"},{valor:4,palo:"picas",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//4copa.jpg"},{valor:5,palo:"corazones",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//5basto.jpg"},{valor:6,palo:"tr\xE9boles",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//6espada.jpg"},{valor:7,palo:"diamantes",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//7oro.jpg"},{valor:8,palo:"picas",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//8copa.jpg"},{valor:9,palo:"corazones",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//9espada.jpg"},{valor:10,palo:"tr\xE9boles",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//10basto.jpg"},{valor:11,palo:"diamantes",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//11copa.jpg"},{valor:12,palo:"picas",imagen:"https://lyotopwjahfarqruzrts.supabase.co/storage/v1/object/public/tomas//12espada.jpg"}];iniciarJuego(){this.cartaActual=this.generarCarta(),this.siguienteCarta=this.generarCarta()}generarCarta(){let e;do e=this.cartas[Math.floor(Math.random()*this.cartas.length)];while(e===this.cartaActual);return e}verificarRespuesta(e){e==="mayor"&&this.siguienteCarta.valor>this.cartaActual.valor||e==="menor"&&this.siguienteCarta.valor<this.cartaActual.valor?(this.mensaje="\xA1CORRECTO! SEGU\xCD SUMANDO PUNTOS",this.puntaje=this.puntaje+1):(this.puntaje=0,this.mensaje=`\xA1NOO! La carta era: ${this.siguienteCarta.valor} de ${this.siguienteCarta.palo}`),this.guardarResultado(),this.cartaActual=this.siguienteCarta,this.siguienteCarta=this.generarCarta()}obtenerCorreoUsuario(){return c(this,null,function*(){let{data:{user:e},error:t}=yield this.supabaseService.getUser();return e?.email??null})}guardarResultado(){return c(this,null,function*(){let e=yield this.obtenerCorreoUsuario();if(e){let{error:t}=yield this.supabaseService.guardarResultadoRanking2(e,this.puntaje);t?(console.error("Error al guardar el resultado:",t),this.mensaje="Error al guardar el resultado. Intenta nuevamente."):(console.log("Resultado guardado"),this.obtenerRanking())}else console.error("No hay usuario autenticado"),this.mensaje="No se pudo obtener el correo del usuario. Aseg\xFArate de estar logueado."})}obtenerRanking(){return c(this,null,function*(){let{data:e,error:t}=yield this.supabaseService.obtenerTopRanking2(5);t?(console.error("Error al obtener ranking:",t),this.mensaje="Error al obtener el ranking. Intenta nuevamente."):this.mejoresJugadores=e.map(n=>({nombre:n.correo,puntos:n.score}))})}static \u0275fac=function(t){return new(t||a)(j(_))};static \u0275cmp=v({type:a,selectors:[["app-mayor-o-menor"]],standalone:!1,decls:21,vars:4,consts:[[1,"mayor-o-menor-container"],[1,"contenido-flex"],[1,"juego"],[1,"botones-laterales"],[1,"mayor",3,"click"],[1,"carta-actual"],["alt","Carta Actual",3,"src"],[1,"menor",3,"click"],[1,"puntaje"],[1,"mensaje-final"],[1,"ranking-container"],[4,"ngFor","ngForOf"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"h2"),i(2,"MAYOR O MENOR"),r(),o(3,"div",1)(4,"div",2)(5,"div",3)(6,"button",4),d("click",function(){return n.verificarRespuesta("mayor")}),i(7,"\u2B06"),r(),o(8,"div",5),C(9,"img",6),r(),o(10,"button",7),d("click",function(){return n.verificarRespuesta("menor")}),i(11,"\u2B07"),r()(),o(12,"div",8),i(13),r(),o(14,"div",9),i(15),r()(),o(16,"div",10)(17,"h3"),i(18,"TOP 5:"),r(),o(19,"ul"),y(20,k,2,2,"li",11),r()()()()),t&2&&(s(9),g("src",n.cartaActual.imagen,h),s(4),b(" Puntaje: ",n.puntaje," "),s(2),b(" ",n.mensaje," "),s(5),g("ngForOf",n.mejoresJugadores))},dependencies:[x],styles:[".mayor-o-menor-container[_ngcontent-%COMP%]{text-align:center;max-width:500px;margin:80px auto;padding:30px;border:2px solid #7f3fbf;border-radius:15px;background:linear-gradient(to bottom right,#f9f2ff,#e7d9ff);box-shadow:0 4px 10px #7f3fbf4d;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;position:relative;min-height:450px;min-width:350px}.carta-actual[_ngcontent-%COMP%]{margin:20px 0}.carta-actual[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:auto;border-radius:10px;border:2px solid #b28be6;box-shadow:0 4px 10px #7f3fbf33}.botones[_ngcontent-%COMP%]{margin:30px 0;display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-size:24px;font-weight:700;transition:background-color .3s ease,transform .2s ease}.menor[_ngcontent-%COMP%]{background-color:#b232c8}.mayor[_ngcontent-%COMP%]{background-color:#7e1edc}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#5a1391;transform:scale(1.05)}.puntaje[_ngcontent-%COMP%]{margin-top:20px;font-size:26px;font-weight:700;color:#5f259f}.mensaje-final[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;color:#aa1abf;font-style:italic;min-height:30px;transition:all .3s ease}.botones-laterales[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;margin:30px 0}.botones-laterales[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:80px;width:80px;font-size:32px;display:flex;justify-content:center;align-items:center;padding:0}.ranking-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.ranking-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px solid #bbb}.ranking-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}"]})};var z=[{path:"",component:m}],u=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=l({type:a});static \u0275inj=p({imports:[f.forChild(z),f]})};var P=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=l({type:a});static \u0275inj=p({imports:[O,u]})};export{P as MayorOMenorModule};
