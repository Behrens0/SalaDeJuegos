import{a as j,b as T,c as W,d as D,e as k,f as A,g as R,h as I,i as z,j as F,k as B,m as L}from"./chunk-DON5HI3A.js";import{a as N}from"./chunk-NWFSGMAH.js";import"./chunk-LJ5XHLMQ.js";import{C as E,F as m,H as t,I as n,L as g,M as x,R as i,S as v,V as u,W as c,X as p,i as f,ia as w,ka as P,qa as O,ta as S,v as s,x as _,y,z as h}from"./chunk-CB2OHQ7B.js";import{h as C}from"./chunk-FK42CRUA.js";function G(d,l){if(d&1&&(t(0,"div",20),i(1),n()),d&2){let r=x();s(),v(r.errorMessage)}}var b=class d{constructor(l,r){this.router=l;this.supabaseService=r}nombre="";edad=null;telefono="";pregunta1="";juegoSeleccionado=[];pregunta3="";errorMessage="";seleccionDeJuego(l){let r=this.juegoSeleccionado.indexOf(l);r>-1?this.juegoSeleccionado.splice(r,1):this.juegoSeleccionado.push(l)}validarTelefono(){return/^\d{10}$/.test(this.telefono)}validarNombre(){return/^[a-zA-Z\s]+$/.test(this.nombre)}onSubmit(){return C(this,null,function*(){if(!this.nombre||!this.edad||!this.telefono||!this.pregunta1||!this.pregunta3){this.errorMessage="Todos los campos son obligatorios.";return}if(!this.validarNombre()){this.errorMessage="El nombre no puede contener n\xFAmeros o caracteres especiales.";return}if(this.edad<18||this.edad>99){this.errorMessage="La edad debe ser entre 18 y 99 a\xF1os.";return}if(!this.validarTelefono()){this.errorMessage="El n\xFAmero de tel\xE9fono debe tener exactamente 10 d\xEDgitos.";return}if(this.juegoSeleccionado.length===0){this.errorMessage="Debes seleccionar al menos un juego.";return}this.errorMessage="";let{data:l}=yield this.supabaseService.getUser(),r=l?.user?.email||"An\xF3nimo",e={nombre:this.nombre,edad:this.edad,telefono:this.telefono,pregunta1:this.pregunta1,juegosSeleccionados:this.juegoSeleccionado,pregunta3:this.pregunta3,email:r,fechaEncuesta:new Date().toISOString()},{error:a}=yield this.supabaseService.guardarEncuesta(e);a?(console.error("Error al guardar la encuesta en Supabase:",a),this.errorMessage="Ocurri\xF3 un error al guardar la encuesta."):(console.log("Encuesta enviada correctamente",e),this.router.navigate(["/home"]))})}static \u0275fac=function(r){return new(r||d)(_(O),_(N))};static \u0275cmp=y({type:d,selectors:[["app-encuesta"]],standalone:!1,decls:50,vars:11,consts:[[3,"ngSubmit"],[1,"titulo"],["for","nombre"],["type","text","id","nombre","name","nombre",3,"ngModelChange","ngModel"],["for","edad"],["type","number","id","edad","name","edad",3,"ngModelChange","ngModel"],["for","telefono"],["type","text","id","telefono","name","telefono",3,"ngModelChange","ngModel"],["type","radio","value","S\xED","name","pregunta1",3,"ngModelChange","ngModel"],["type","radio","value","No","name","pregunta1",3,"ngModelChange","ngModel"],["type","checkbox",3,"change","checked"],["for","pregunta3"],["id","pregunta3","name","pregunta3",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","Ahorcado"],["value","Preguntados"],["value","gameOfThrones"],["value","Mayor o Menor"],["class","error-messedad",4,"ngIf"],["type","submit"],[1,"error-messedad"]],template:function(r,e){r&1&&(t(0,"form",0),g("ngSubmit",function(){return e.onSubmit()}),t(1,"div",1),i(2,"Encuesta"),n(),t(3,"div")(4,"label",2),i(5,"Nombre y Apellido:"),n(),t(6,"input",3),p("ngModelChange",function(o){return c(e.nombre,o)||(e.nombre=o),o}),n()(),t(7,"div")(8,"label",4),i(9,"Edad:"),n(),t(10,"input",5),p("ngModelChange",function(o){return c(e.edad,o)||(e.edad=o),o}),n()(),t(11,"div")(12,"label",6),i(13,"N\xFAmero de Tel\xE9fono:"),n(),t(14,"input",7),p("ngModelChange",function(o){return c(e.telefono,o)||(e.telefono=o),o}),n()(),t(15,"div")(16,"label"),i(17,"\xBFTe parece que la p\xE1gina podr\xEDa ser mejorada?"),n(),t(18,"input",8),p("ngModelChange",function(o){return c(e.pregunta1,o)||(e.pregunta1=o),o}),n(),i(19," S\xED "),t(20,"input",9),p("ngModelChange",function(o){return c(e.pregunta1,o)||(e.pregunta1=o),o}),n(),i(21," No "),n(),t(22,"div")(23,"label"),i(24,"De los siguientes juegos, eleg\xED cuales tuvieron el sistema de puntos mas divertido"),n(),t(25,"input",10),g("change",function(){return e.seleccionDeJuego("Ahorcado")}),n(),i(26," Ahorcado "),t(27,"input",10),g("change",function(){return e.seleccionDeJuego("Preguntados")}),n(),i(28," Preguntados "),t(29,"input",10),g("change",function(){return e.seleccionDeJuego("Word Game")}),n(),i(30," Word Game "),t(31,"input",10),g("change",function(){return e.seleccionDeJuego("Mayor o Menor")}),n(),i(32," Mayor o Menor "),n(),t(33,"div")(34,"label",11),i(35,"Eleg\xED tus juego favorito"),n(),t(36,"select",12),p("ngModelChange",function(o){return c(e.pregunta3,o)||(e.pregunta3=o),o}),t(37,"option",13),i(38,"Selecciona tu juego favorito"),n(),t(39,"option",14),i(40,"Ahorcado"),n(),t(41,"option",15),i(42,"Preguntados"),n(),t(43,"option",16),i(44,"gameOfThrones"),n(),t(45,"option",17),i(46,"Mayor o Menor"),n()()(),E(47,G,2,1,"div",18),t(48,"button",19),i(49,"Enviar"),n()()),r&2&&(s(6),u("ngModel",e.nombre),s(4),u("ngModel",e.edad),s(4),u("ngModel",e.telefono),s(4),u("ngModel",e.pregunta1),s(2),u("ngModel",e.pregunta1),s(5),m("checked",e.juegoSeleccionado.includes("Ahorcado")),s(2),m("checked",e.juegoSeleccionado.includes("Preguntados")),s(2),m("checked",e.juegoSeleccionado.includes("Game Of Thrones")),s(2),m("checked",e.juegoSeleccionado.includes("Mayor o Menor")),s(5),u("ngModel",e.pregunta3),s(11),m("ngIf",e.errorMessage))},dependencies:[w,A,F,B,j,R,z,I,T,W,k,D],styles:["form[_ngcontent-%COMP%]{max-width:500px;margin:130px auto;padding:40px;border:1px solid #ccc;border-radius:10px;box-shadow:0 4px 20px #0003;background-color:#fff;font-family:Roboto,sans-serif}.titulo[_ngcontent-%COMP%]{text-align:center;font-size:30px;font-weight:700;color:#4caf50;margin-bottom:20px;text-transform:uppercase}label[_ngcontent-%COMP%]{font-size:18px;color:#333;margin-bottom:8px;display:block}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:90%;padding:10px;margin-top:5px;margin-bottom:15px;border:1px solid #ccc;border-radius:5px;font-size:16px;box-sizing:border-box}input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:10px}select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:16px}input[type=text][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus{border-color:#4caf50;outline:none}small[_ngcontent-%COMP%]{color:red;font-size:14px;display:block;margin-top:-10px;margin-bottom:10px}button[_ngcontent-%COMP%]{width:100%;background-color:#4caf50;color:#fff;padding:12px;border:none;border-radius:5px;cursor:pointer;font-size:16px;margin-top:10px;transition:background-color .3s,transform .2s}button[_ngcontent-%COMP%]:hover{background-color:#45a049}button[_ngcontent-%COMP%]:active{transform:scale(.95)}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-bottom:15px}"]})};var U=[{path:"",component:b}],M=class d{static \u0275fac=function(r){return new(r||d)};static \u0275mod=h({type:d});static \u0275inj=f({imports:[S.forChild(U),S]})};var V=class d{static \u0275fac=function(r){return new(r||d)};static \u0275mod=h({type:d});static \u0275inj=f({imports:[P,L,M]})};export{V as EncuestaModule};
